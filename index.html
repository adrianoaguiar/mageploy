<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>Mageploy by pug-more</title>
  </head>

  <body>
    <div id="container">
      <div class="inner">

        <header>
          <h1>Mageploy</h1>
          <h2>An experimental module to replicate Admin actions between different project environments</h2>
        </header>

        <section id="downloads" class="clearfix">
          <a href="https://github.com/pug-more/mageploy/zipball/master" id="download-zip" class="button"><span>Download .zip</span></a>
          <a href="https://github.com/pug-more/mageploy/tarball/master" id="download-tar-gz" class="button"><span>Download .tar.gz</span></a>
          <a href="https://github.com/pug-more/mageploy" id="view-on-github" class="button"><span>View on GitHub</span></a>
        </section>

        <hr>

        <section id="main_content">
          <p><img src="https://raw.github.com/wiki/pug-more/mageploy/mageploy_256_noborder.png" alt="Logo of Mageploy"></p>

<h1>1. Introduction</h1>

<p>If you are reading this documentation you are likely a developer who had the chance to work with Magento. There are several tools that were born with the intent of leveraging the development experience on Magento. Some favourite tools are N98magerun, Modman and Magentleman. Mageploy aims at becoming one of them. It's intended to facilitate the deployment process, something new to any other tool, as far as we know.</p>

<p>What do we intend with the word "deployment"? If you have developed a complete web store with Magento you know that it's not all about code. It's also a matter of doing some activity (sometimes a lot of that) in the Admin Control Panel. Things like creating Attributes, associating them to brand new Attribute Sets, structuring Category trees, changing System Configuration and so on (and on). Once you have done all this kind of work in your development environment you have to be sure that it will be done exactly the same way on each other environment involved in the process: other developers' environments, staging environments and finally the production environment. So, with the word "deploy" we not only mean mantaining code consistency among different environments but also mantaining entities and configuration consistency.</p>

<p>Given that you already know how to mantain code consistency (you are on GitHub after all), Mageploy aims at automating the process of mantaining entities and configuration consistency without obliging you to bypass the usage of the Admin Control Panel. Infact, the only other way of mantaining such consistency (the so called "best practice") is that of writing install/upgrade scripts which create entities and change System Configuration programmatically. That's definitively boring and error prone.</p>

<h2>1.1 About Mageploy</h2>

<p>Mageploy has been developed on <strong>Magento CE v 1.7.0.2</strong> and hasn't been tested with different CE or EE versions yet.</p>

<p>The idea of Mageploy was born within a discussion on Magento Stack Exchange named "What is the best deploy strategy?" that you can read at the following URL: <a href="http://magento.stackexchange.com/questions/252/what-is-the-best-deploy-strategy">http://magento.stackexchange.com/questions/252/what-is-the-best-deploy-strategy</a>. In that discussion I asked to Magento developers what was their preferred deploy strategy and answers given to me made me understand that there wasn't any commonly adopted strategy, except for the "definitively boring and error prone" practice of doing a lot of code to mantain consistency among different environments.</p>

<p>So the idea of developing Mageploy took place and here we are.</p>

<p>The basic idea under Mageploy is that every action you perform in the Magento Admin Control Panel translates into an invocation of a method of a controller. These "action methods" take their parameters from the HTTP request object. So it's all about tracking and serializing these method calls and request parameters into a file and centralizing it under a version control system. Each action you perform on your environment not only is stored into a "global actions" file but also in a "local actions" file which is not versioned. 
Are you getting it? Actions performed in other enviroments result from the difference between global actions and your local actions, once you have checked out the global file.</p>

<p>Replicating these actions having stored method names and parameters should be a joke, isn't it? Obviously it's not so simple. There is a problem concerning the fact that every environment has its own IDs which you can't count on when they are part of a method's parameters. So we have to focus on finding a way to convert specific IDs into universally unique identifiers (UUIDs) so that we could do our data marshalling and demarshalling without worrying about specific IDs.</p>

<p>That's the complex part of Mageploy but that's also its strength and once we are able to perform a conversion from IDs to UUIDs and back we are able to replicate changes between different environments automatically and consistently. Converting IDs into UUIDs can sometimes force some limitations and there is also the risk of logical conflicts: think, for example, to two developers creating an attribute with the same code. Mageploy can facilitate our deployment tasks a lot but can't work magic; even Git can't automatically solve code conflicts after all.</p>

<h2>1.2 Installation and Setup</h2>

<p>To install Mageploy easily we suggest you to install Modman (Module Manager) by Colin Mollenhour; you can find the instructions to install Modman here: <a href="https://github.com/colinmollenhour/modman">https://github.com/colinmollenhour/modman</a>.</p>

<p>Once you have Modman installed, go to the root folder of your Magento project and type the following commands to initialize Modman:</p>

<pre><code>$ modman init
</code></pre>

<p>and then,  to clone Mageploy from its git repository via ssh:</p>

<pre><code>$ modman clone git@github.com:pug-more/mageploy.git
</code></pre>

<p>After that, clear your Magento Cache, if enabled, and run Magento Compilation Process if Compilation is enabled. We assume you know how to perform such tasks. If not, you'd better know.</p>

<p>At this point Mageploy should be up and running but still needs some configuration changes.</p>

<p>Go to System -&gt; Configuration -&gt; Advanced -&gt; Developer section and  expand the "Mageploy" tab.
Then you can change the values of the following configuration parameters:</p>

<ul>
<li>
<strong>Active:</strong> choose whether to activate action tracking. By default tracking is active. Activation can be performed faster through the command line, as we will see in the section dedicated to the command line tool.</li>
<li>
<strong>Debug mode:</strong> if set to Yes, Mageploy will write logs even if logging is disabled in Magento.</li>
<li>
<strong>Specific User Identification:</strong> by default it is set to "anonymous" and we encourage you to change this value and set a unique identifier among the different environments the project is developed and deployed on. This way, when you'll show the history of global changes, you will be able to distinguish who did what. Another reason to differentiate this value among different environments is that doing so you will enforce the  probability to avoid conflicts among global actions.</li>
</ul><p>There is only one step remaining to begin taking advantage from the usage of Mageploy. 
Run the following command from the root folder of your Magento project:</p>

<pre><code>$ php shell/mageploy --status
</code></pre>

<p>At this point you should see something similar to the following</p>

<pre><code>Mageploy v 1.0.0 - tracking is active - user is aronchi

There aren't any pending actions to execute.
</code></pre>

<p>Most important, your first invocation of Mageploy's command line tool has the effect of creating a folder named "mageploy" under Magento's "var" folder and initializing the "mageploy_all.csv" and "mageploy_executed.csv" files. Put the "mageploy_all.csv" under version control and ignore "mageploy_executed.csv" from version control and you are almost done.</p>

<h2>1.3 Basic Usage</h2>

<p>Once Mageploy is configured and tracking is activated, actions you perform in certain sections of Magento Admin Panel are tracked both into "mageploy_all.csv" and "mageploy_executed.csv" files.</p>

<p>Replicating tracking in both files serves the purpose of instructing Mageploy about which actions have been executed locally (the ones in "mageploy_executed.csv" which has not to be put under version control) and don't have to be replicated while reading the global actions (the ones in "mageploy_all.csv", which has to be put under version control).</p>

<p>That's quite all you have to know, except that you have to learn how to use the Command Line Tool. See the  following paragraph dedicated to the Command Line Tool for further instructions.</p>

<h2>1.4 The Command Line Tool</h2>

<h2>1.5 Summary</h2>

<h1>2. Trackers</h1>

<h2>2.1 About Trackers</h2>

<h2>2.2 Attribute Tracker</h2>

<h2>2.3 Attribute Set Tracker</h2>

<h2>2.4 Category Tracker</h2>

<h2>2.5 System Config Tracker</h2>

<h2>2.6 CMS Page Tracker</h2>

<h2>2.7 Static Block Tracker</h2>

<h2>2.8 Summary</h2>

<h1>3. Extending Mageploy</h1>

<h2>3.1 Tracker Basics</h2>

<h2>3.2 Adding a Tracker</h2>

<h2>3.3 Developing a Tracker</h2>

<h2>3.4 Summary</h2>
        </section>

        <footer>
          Mageploy is maintained by <a href="https://github.com/pug-more">pug-more</a><br>
          This page was generated by <a href="http://pages.github.com">GitHub Pages</a>. Tactile theme by <a href="http://twitter.com/jasonlong">Jason Long</a>.
        </footer>

        
      </div>
    </div>
  </body>
</html>